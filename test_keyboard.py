#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ keyboard
"""

import sys
import os

def test_keyboard():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É keyboard"""
    print("=== –¢–µ—Å—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ keyboard ===")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º Python
    print(f"Python –≤–µ—Ä—Å–∏—è: {sys.version}")
    print(f"–ü—É—Ç—å –∫ Python: {sys.executable}")
    print(f"–¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: {os.getcwd()}")
    
    # –ü—ã—Ç–∞–µ–º—Å—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å keyboard
    try:
        import keyboard
        print("‚úÖ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ keyboard —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞")
        # –£ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–µ—Ä—Å–∏–π keyboard –Ω–µ—Ç –∞—Ç—Ä–∏–±—É—Ç–∞ __version__
        try:
            print(f"–í–µ—Ä—Å–∏—è keyboard: {keyboard.__version__}")
        except AttributeError:
            print("–í–µ—Ä—Å–∏—è keyboard: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞")
        
        # –¢–µ—Å—Ç–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        print("\n–¢–µ—Å—Ç–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏...")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ–º –ª–∏ –º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
        def test_callback():
            print("üéØ –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞!")
        
        try:
            print("–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é —Ç–µ—Å—Ç–æ–≤—É—é –≥–æ—Ä—è—á—É—é –∫–ª–∞–≤–∏—à—É F12...")
            keyboard.add_hotkey("F12", test_callback, suppress=True)
            print("‚úÖ –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞ F12 –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞")
            print("–ù–∞–∂–º–∏—Ç–µ F12 –¥–ª—è —Ç–µ—Å—Ç–∞ (–∏–ª–∏ Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞)")
            
            # –ñ–¥–µ–º –Ω–∞–∂–∞—Ç–∏—è
            keyboard.wait("F12")
            
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≥–æ—Ä—è—á–µ–π –∫–ª–∞–≤–∏—à–∏: {e}")
            
        finally:
            # –û—á–∏—â–∞–µ–º –≤—Å–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
            try:
                keyboard.unhook_all()
                print("‚úÖ –í—Å–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –æ—á–∏—â–µ–Ω—ã")
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à: {e}")
                
    except ImportError as e:
        print(f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å keyboard: {e}")
        print("–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: pip install keyboard")
        
    except Exception as e:
        print(f"‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")

if __name__ == "__main__":
    try:
        test_keyboard()
    except KeyboardInterrupt:
        print("\n\nüëã –¢–µ—Å—Ç –ø—Ä–µ—Ä–≤–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º")
    except Exception as e:
        print(f"\n\n‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
        import traceback
        traceback.print_exc()
